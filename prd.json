{
  "project": "WorkoutPlanner",
  "branchName": "feature/workout-planner-mvp",
  "description": "Smart workout planning app with muscle recovery tracking, dynamic recommendations, and gamification",
  "userStories": [
    {
      "id": "US-001",
      "title": "Flutter project setup with Firebase",
      "description": "As a developer, I need the Flutter project scaffolded with Firebase integration.",
      "acceptanceCriteria": [
        "Flutter project created with 'flutter create workout_planner'",
        "firebase_core, firebase_auth, cloud_firestore packages added to pubspec.yaml",
        "Folder structure created: lib/models/, lib/services/, lib/screens/, lib/widgets/",
        "Basic main.dart with MaterialApp and placeholder home screen",
        "flutter analyze passes with no errors",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Core data models",
      "description": "As a developer, I need Dart models for the app's core data structures.",
      "acceptanceCriteria": [
        "UserProfile model: id, name, level, xp, currentStreak, longestStreak, createdAt",
        "MuscleGroup enum with all muscle groups",
        "MuscleFatigue model: muscle, lastWorked, fatigueScore, recoveryEta",
        "All models have toJson() and fromJson() methods",
        "Models in lib/models/ directory",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Exercise and workout models",
      "description": "As a developer, I need models for exercises, sets, and workout logs.",
      "acceptanceCriteria": [
        "Exercise model: id, name, primaryMuscles, secondaryMuscles, equipment, category (push/pull/legs)",
        "ExerciseSet model: exerciseId, sets, reps, weight, rpe, timestamp",
        "WorkoutLog model: id, date, type, exercises list, completed, notes",
        "WorkoutType enum: push, pull, legs, rest, cardio",
        "All models have toJson() and fromJson() methods",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Achievement model and definitions",
      "description": "As a developer, I need the achievement system data structures.",
      "acceptanceCriteria": [
        "Achievement model: id, name, description, icon, requirement, unlockedAt",
        "AchievementType enum for all 15 achievements",
        "Static list of all achievement definitions with unlock criteria",
        "Achievements: FirstWorkout, WeekWarrior, PushMaster, PullPower, LegLegend, StreakStarter, StreakLord, VolumeKing, CenturyClub, IronWill, EarlyBird, NightOwl, PersonalBest, BalancedBuilder, RestChampion",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Exercise database JSON",
      "description": "As a developer, I need a JSON database of exercises available at Llanishen Leisure Centre.",
      "acceptanceCriteria": [
        "JSON file at assets/exercises.json with 50+ exercises",
        "Each exercise has: id, name, primaryMuscles, secondaryMuscles, equipment, category",
        "Covers all muscle groups: chest, back, shoulders, biceps, triceps, core, quads, hamstrings, glutes, calves",
        "Equipment limited to: dumbbells, barbells, cables, machines, bodyweight, kettlebells",
        "Categories: push, pull, legs, core, cardio",
        "pubspec.yaml updated to include assets folder",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Exercise service",
      "description": "As a developer, I need a service to load and query exercises.",
      "acceptanceCriteria": [
        "ExerciseService class in lib/services/",
        "loadExercises() loads from JSON asset",
        "getExercisesByMuscle(muscle) returns exercises targeting that muscle",
        "getExercisesByCategory(category) returns push/pull/legs exercises",
        "getExercisesByEquipment(equipment) filters by equipment type",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Muscle recovery constants and utilities",
      "description": "As a developer, I need recovery time constants and helper functions.",
      "acceptanceCriteria": [
        "Recovery hours defined: small muscles (48h), medium (60h), large (72h)",
        "Muscle size mapping: biceps/triceps/calves=small, shoulders/core=medium, chest/back/quads/glutes/hamstrings=large",
        "calculateRecoveryPercentage(lastWorked, muscleSize) returns 0-100",
        "isRecovered(percentage) returns true if >= 85%",
        "Compound movement overlap map (e.g., bench press affects triceps at 50%)",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "External activity impact definitions",
      "description": "As a developer, I need impact mappings for non-gym activities.",
      "acceptanceCriteria": [
        "ActivityType enum: running, cycling, swimming, walking, hiit, sports",
        "Impact map per activity type showing affected muscles and fatigue scores",
        "Running: quads/hamstrings/calves/glutes high impact",
        "Cycling: quads/hamstrings medium-high impact",
        "Swimming: full body medium impact",
        "Intensity multipliers: light (0.5), moderate (1.0), intense (1.5)",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Firebase authentication service",
      "description": "As a developer, I need a service to handle user authentication.",
      "acceptanceCriteria": [
        "AuthService class in lib/services/",
        "signInWithEmail(email, password) method",
        "signUpWithEmail(email, password, name) method",
        "signOut() method",
        "currentUser stream for auth state",
        "Error handling for invalid credentials",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "User profile Firestore service",
      "description": "As a developer, I need a service to manage user profiles in Firestore.",
      "acceptanceCriteria": [
        "UserService class in lib/services/",
        "createProfile(userId, name) creates initial profile with level 1, 0 XP",
        "getProfile(userId) returns UserProfile",
        "updateXP(userId, amount) adds XP and handles level-up",
        "updateStreak(userId) increments or resets streak",
        "Level thresholds: L1=0, L2=500, L3=1500, L4=3500, L5=7000 (exponential)",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Muscle fatigue Firestore service",
      "description": "As a developer, I need a service to track muscle fatigue state.",
      "acceptanceCriteria": [
        "FatigueService class in lib/services/",
        "getFatigueStatus(userId) returns fatigue for all muscles",
        "updateFatigue(userId, muscle, fatigueScore) sets new fatigue after workout",
        "logExternalActivity(userId, activityType, duration, intensity) updates affected muscles",
        "getRecoveryStatus(userId) returns recovery percentage per muscle",
        "getReadyMuscles(userId) returns muscles with >= 85% recovery",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Workout recommendation engine",
      "description": "As a developer, I need an algorithm to recommend today's workout.",
      "acceptanceCriteria": [
        "RecommendationService class in lib/services/",
        "getRecommendedWorkout(userId) returns WorkoutType with reasoning",
        "Algorithm scores: recovery status, days since category trained, weekly volume deficit",
        "Returns 'rest' if no muscle groups adequately recovered",
        "Returns top recommendation plus 2 alternatives",
        "getWeekForecast(userId) returns 7-day predicted schedule",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Workout logging service",
      "description": "As a developer, I need a service to log completed workouts.",
      "acceptanceCriteria": [
        "WorkoutService class in lib/services/",
        "startWorkout(userId, type) creates new workout log",
        "logExercise(workoutId, exerciseId, sets, reps, weight, rpe) adds exercise",
        "completeWorkout(workoutId) marks complete, calculates fatigue, awards XP",
        "getWorkoutHistory(userId, limit) returns past workouts",
        "getTodayWorkout(userId) returns current day's workout if exists",
        "Typecheck passes"
      ],
      "priority": 13,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Achievement service",
      "description": "As a developer, I need a service to check and unlock achievements.",
      "acceptanceCriteria": [
        "AchievementService class in lib/services/",
        "checkAchievements(userId) evaluates all unlock conditions",
        "unlockAchievement(userId, achievementId) saves unlock timestamp",
        "getUnlockedAchievements(userId) returns user's achievements",
        "getAchievementProgress(userId) returns progress toward locked achievements",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "PR tracking service",
      "description": "As a developer, I need a service to track personal records.",
      "acceptanceCriteria": [
        "PRService class in lib/services/",
        "checkForPR(userId, exerciseId, weight, reps) returns true if new PR",
        "getPRs(userId, exerciseId) returns PRs by rep range (1RM, 5RM, 10RM)",
        "getAllPRs(userId) returns all exercise PRs",
        "PR defined per exercise + rep range (e.g., Bench 5RM vs Bench 10RM)",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Login screen UI",
      "description": "As a user, I want to sign in to the app.",
      "acceptanceCriteria": [
        "LoginScreen in lib/screens/",
        "Email and password text fields",
        "Sign In button that calls AuthService",
        "Sign Up link that navigates to registration",
        "Error messages displayed for invalid credentials",
        "Loading indicator during authentication",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Registration screen UI",
      "description": "As a new user, I want to create an account.",
      "acceptanceCriteria": [
        "RegisterScreen in lib/screens/",
        "Name, email, password, confirm password fields",
        "Create Account button",
        "Validation for matching passwords",
        "Creates user profile after successful registration",
        "Navigates to onboarding after registration",
        "Typecheck passes"
      ],
      "priority": 17,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Onboarding flow",
      "description": "As a new user, I want a quick setup to configure my preferences.",
      "acceptanceCriteria": [
        "OnboardingScreen with PageView for 3 steps",
        "Step 1: Welcome message",
        "Step 2: Experience level selection (beginner/intermediate/advanced)",
        "Step 3: Training frequency goal (3/4/5/6 days per week)",
        "Gym pre-selected as Llanishen Leisure Centre",
        "Saves preferences to user profile",
        "Navigates to home screen on completion",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "App navigation shell",
      "description": "As a user, I want bottom navigation to move between main screens.",
      "acceptanceCriteria": [
        "MainShell widget with BottomNavigationBar",
        "4 tabs: Today, Forecast, History, Profile",
        "Icons: fitness_center, calendar_today, history, person",
        "Maintains state when switching tabs",
        "Auth wrapper redirects to login if not authenticated",
        "Typecheck passes"
      ],
      "priority": 19,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Today's workout screen - header",
      "description": "As a user, I want to see my recommended workout type for today.",
      "acceptanceCriteria": [
        "TodayScreen in lib/screens/",
        "Header shows workout type (Push Day, Pull Day, Leg Day, Rest Day)",
        "Color coded: Push=blue, Pull=green, Legs=orange, Rest=gray",
        "Shows target muscle groups as chips",
        "Shows estimated duration",
        "Alternative workout button opens bottom sheet with options",
        "Typecheck passes"
      ],
      "priority": 20,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Today's workout screen - exercise list",
      "description": "As a user, I want to see recommended exercises for today.",
      "acceptanceCriteria": [
        "List of 6-8 exercises for the workout type",
        "Each exercise card shows: name, target muscles, suggested sets x reps",
        "Exercises loaded from ExerciseService filtered by category",
        "Cards are tappable to open logging modal",
        "Completed exercises show checkmark overlay",
        "Typecheck passes"
      ],
      "priority": 21,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Exercise logging modal",
      "description": "As a user, I want to log my sets, reps, and weight for each exercise.",
      "acceptanceCriteria": [
        "Modal bottom sheet opens when tapping exercise",
        "Shows exercise name and target muscles",
        "Number inputs: sets completed, reps, weight (kg)",
        "RPE slider 1-10 with labels",
        "Complete button saves to WorkoutService",
        "Close button dismisses without saving",
        "Typecheck passes"
      ],
      "priority": 22,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "External activity logging",
      "description": "As a user, I want to log non-gym activities that affect my recovery.",
      "acceptanceCriteria": [
        "Log Activity FAB on Today screen",
        "Opens modal with activity type dropdown",
        "Duration input in minutes",
        "Intensity selector: light/moderate/intense",
        "Save updates muscle fatigue via FatigueService",
        "Refreshes workout recommendation after save",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-024",
      "title": "Finish workout flow",
      "description": "As a user, I want to complete my workout and see my results.",
      "acceptanceCriteria": [
        "Finish Workout button appears when exercises logged",
        "Calls WorkoutService.completeWorkout()",
        "Shows summary dialog: muscles worked, total volume, XP earned",
        "Updates fatigue for all worked muscles",
        "Awards XP with streak multiplier",
        "Checks and triggers achievement unlocks",
        "Typecheck passes"
      ],
      "priority": 24,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "7-day forecast screen",
      "description": "As a user, I want to see my workout plan for the week.",
      "acceptanceCriteria": [
        "ForecastScreen in lib/screens/",
        "Shows next 7 days in a list or calendar row",
        "Each day shows predicted workout type with color",
        "Today highlighted differently",
        "Tapping day shows predicted muscles and reasoning",
        "Disclaimer: forecast updates based on activity",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Workout history screen",
      "description": "As a user, I want to see my past workouts.",
      "acceptanceCriteria": [
        "HistoryScreen in lib/screens/",
        "Calendar view with dots on workout days",
        "List below calendar showing recent workouts",
        "Each item shows: date, workout type, total volume",
        "Tapping workout opens detail view",
        "Filter chips: All, Push, Pull, Legs",
        "Typecheck passes"
      ],
      "priority": 26,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Workout detail view",
      "description": "As a user, I want to see details of a past workout.",
      "acceptanceCriteria": [
        "WorkoutDetailScreen shows full workout",
        "Lists all exercises with sets, reps, weight logged",
        "Shows total volume and duration",
        "Shows XP earned from that workout",
        "Back button returns to history",
        "Typecheck passes"
      ],
      "priority": 27,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "Profile screen",
      "description": "As a user, I want to see my profile and stats.",
      "acceptanceCriteria": [
        "ProfileScreen in lib/screens/",
        "Shows: name, level with XP progress bar, current streak",
        "Stats section: total workouts, total volume, member since",
        "Longest streak displayed",
        "Settings button (placeholder for now)",
        "Sign out button",
        "Typecheck passes"
      ],
      "priority": 28,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Progress statistics dashboard",
      "description": "As a user, I want to see my progress with charts.",
      "acceptanceCriteria": [
        "Stats tab or section in Profile",
        "Line chart: weekly volume over last 4 weeks (fl_chart)",
        "Pie chart: muscle group distribution",
        "Personal records section showing top PRs",
        "Weekly/monthly toggle for stats period",
        "Typecheck passes"
      ],
      "priority": 29,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-030",
      "title": "Achievements screen",
      "description": "As a user, I want to see my achievements and progress toward locked ones.",
      "acceptanceCriteria": [
        "AchievementsScreen accessible from Profile",
        "Grid of achievement badges",
        "Unlocked achievements: colored with date earned",
        "Locked achievements: grayed out with progress indicator",
        "Tapping achievement shows description and criteria",
        "Typecheck passes"
      ],
      "priority": 30,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-031",
      "title": "Achievement unlock notification",
      "description": "As a user, I want to be notified when I unlock an achievement.",
      "acceptanceCriteria": [
        "Toast/snackbar appears when achievement unlocked",
        "Shows achievement name and icon",
        "Celebratory animation or confetti effect",
        "Tapping notification opens achievements screen",
        "Typecheck passes"
      ],
      "priority": 31,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-032",
      "title": "XP and level-up celebration",
      "description": "As a user, I want to see when I level up.",
      "acceptanceCriteria": [
        "Level-up dialog appears when XP crosses threshold",
        "Shows new level with animation",
        "Shows XP needed for next level",
        "Celebratory visual effect",
        "Dismiss button closes dialog",
        "Typecheck passes"
      ],
      "priority": 32,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-033",
      "title": "Streak tracking with rest days",
      "description": "As a user, I want my streak to count rest days properly.",
      "acceptanceCriteria": [
        "Log Rest Day button on Today screen when rest is recommended",
        "Logging rest day maintains streak",
        "Streak breaks only if no activity on non-rest day",
        "Streak freeze: 1 per week, auto-applied if missed day",
        "Streak displayed on profile and today screen",
        "Typecheck passes"
      ],
      "priority": 33,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-034",
      "title": "Deload week suggestion",
      "description": "As a user, I want the app to suggest deload weeks for recovery.",
      "acceptanceCriteria": [
        "Track consecutive training weeks",
        "After 4-6 weeks of training, suggest deload",
        "Deload banner appears on Today screen",
        "Deload reduces recommended volume by 40-50%",
        "User can dismiss or accept deload week",
        "Typecheck passes"
      ],
      "priority": 34,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-035",
      "title": "Offline support",
      "description": "As a user, I want the app to work offline.",
      "acceptanceCriteria": [
        "Firestore offline persistence enabled",
        "Exercise database cached in local storage (Hive)",
        "Workouts save locally when offline",
        "Sync indicator shows offline/syncing status in app bar",
        "Data syncs automatically when connection restored",
        "Typecheck passes"
      ],
      "priority": 35,
      "passes": true,
      "notes": ""
    }
  ]
}